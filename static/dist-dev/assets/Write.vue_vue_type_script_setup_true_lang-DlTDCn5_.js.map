{"version":3,"file":"Write.vue_vue_type_script_setup_true_lang-DlTDCn5_.js","sources":["../../src/views/Authorization/User/components/Write.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { Form, FormSchema } from '@/components/Form'\nimport { useForm } from '@/hooks/web/useForm'\nimport { PropType, reactive, watch } from 'vue'\nimport { DepartmentUserItem } from '@/api/department/types'\nimport { useValidator } from '@/hooks/web/useValidator'\n\nconst { required } = useValidator()\n\nconst props = defineProps({\n  currentRow: {\n    type: Object as PropType<DepartmentUserItem>,\n    default: () => undefined\n  },\n  formSchema: {\n    type: Array as PropType<FormSchema[]>,\n    default: () => []\n  }\n})\n\nconst rules = reactive({\n  username: [required()],\n  account: [required()],\n  'department.id': [required()]\n})\n\nconst { formRegister, formMethods } = useForm()\nconst { setValues, getFormData, getElFormExpose } = formMethods\n\nconst submit = async () => {\n  const elForm = await getElFormExpose()\n  const valid = await elForm?.validate().catch((err) => {\n    console.log(err)\n  })\n  if (valid) {\n    const formData = await getFormData()\n    return formData\n  }\n}\n\nwatch(\n  () => props.currentRow,\n  (currentRow) => {\n    if (!currentRow) return\n    setValues(currentRow)\n  },\n  {\n    deep: true,\n    immediate: true\n  }\n)\n\ndefineExpose({\n  submit\n})\n</script>\n\n<template>\n  <Form :rules=\"rules\" @register=\"formRegister\" :schema=\"formSchema\" />\n</template>\n"],"names":["required","useValidator","props","__props","rules","reactive","formRegister","formMethods","useForm","setValues","getFormData","getElFormExpose","submit","__async","elForm","err","watch","currentRow","__expose"],"mappings":"kiBAOM,KAAA,CAAE,SAAAA,CAAS,EAAIC,EAAa,EAE5BC,EAAQC,EAWRC,EAAQC,EAAS,CACrB,SAAU,CAACL,GAAU,EACrB,QAAS,CAACA,GAAU,EACpB,gBAAiB,CAACA,EAAU,CAAA,CAAA,CAC7B,EAEK,CAAE,aAAAM,EAAc,YAAAC,CAAY,EAAIC,EAAQ,EACxC,CAAE,UAAAC,EAAW,YAAAC,EAAa,gBAAAC,CAAoB,EAAAJ,EAE9CK,EAAS,IAAYC,EAAA,sBACnB,MAAAC,EAAS,MAAMH,EAAgB,EAIrC,GAHc,MAAMG,GAAA,YAAAA,EAAQ,WAAW,MAAOC,GAAQ,CACpD,QAAQ,IAAIA,CAAG,CAAA,GAIR,OADU,MAAML,EAAY,CAGvC,GAEA,OAAAM,EACE,IAAMd,EAAM,WACXe,GAAe,CACTA,GACLR,EAAUQ,CAAU,CACtB,EACA,CACE,KAAM,GACN,UAAW,EAAA,CAEf,EAEaC,EAAA,CACX,OAAAN,CAAA,CACD"}
{"version":3,"file":"useTagsView-lYbyubs-.js","sources":["../../src/hooks/web/useTagsView.ts"],"sourcesContent":["import { useTagsViewStoreWithOut } from '@/store/modules/tagsView'\nimport { RouteLocationNormalizedLoaded, useRouter } from 'vue-router'\nimport { computed, nextTick, unref } from 'vue'\n\nexport const useTagsView = () => {\n  const tagsViewStore = useTagsViewStoreWithOut()\n\n  const { replace, currentRoute } = useRouter()\n\n  const selectedTag = computed(() => tagsViewStore.getSelectedTag)\n\n  const closeAll = (callback?: Fn) => {\n    tagsViewStore.delAllViews()\n    callback?.()\n  }\n\n  const closeLeft = (callback?: Fn) => {\n    tagsViewStore.delLeftViews(unref(selectedTag) as RouteLocationNormalizedLoaded)\n    callback?.()\n  }\n\n  const closeRight = (callback?: Fn) => {\n    tagsViewStore.delRightViews(unref(selectedTag) as RouteLocationNormalizedLoaded)\n    callback?.()\n  }\n\n  const closeOther = (callback?: Fn) => {\n    tagsViewStore.delOthersViews(unref(selectedTag) as RouteLocationNormalizedLoaded)\n    callback?.()\n  }\n\n  const closeCurrent = (view?: RouteLocationNormalizedLoaded, callback?: Fn) => {\n    if (view?.meta?.affix) return\n    tagsViewStore.delView(view || unref(currentRoute))\n\n    callback?.()\n  }\n\n  const refreshPage = async (view?: RouteLocationNormalizedLoaded, callback?: Fn) => {\n    tagsViewStore.delCachedView()\n    const { path, query } = view || unref(currentRoute)\n    await nextTick()\n    replace({\n      path: '/redirect' + path,\n      query: query\n    })\n    callback?.()\n  }\n\n  const setTitle = (title: string, path?: string) => {\n    tagsViewStore.setTitle(title, path)\n  }\n\n  return {\n    closeAll,\n    closeLeft,\n    closeRight,\n    closeOther,\n    closeCurrent,\n    refreshPage,\n    setTitle\n  }\n}\n"],"names":["useTagsView","tagsViewStore","useTagsViewStoreWithOut","replace","currentRoute","useRouter","selectedTag","computed","callback","unref","view","_a","__async","path","query","nextTick","title"],"mappings":"wTAIO,MAAMA,EAAc,IAAM,CAC/B,MAAMC,EAAgBC,EAAwB,EAExC,CAAE,QAAAC,EAAS,aAAAC,CAAa,EAAIC,EAAU,EAEtCC,EAAcC,EAAS,IAAMN,EAAc,cAAc,EA4CxD,MAAA,CACL,SA3CgBO,GAAkB,CAClCP,EAAc,YAAY,EACfO,GAAA,MAAAA,GACb,EAyCE,UAvCiBA,GAAkB,CACrBP,EAAA,aAAaQ,EAAMH,CAAW,CAAkC,EACnEE,GAAA,MAAAA,GACb,EAqCE,WAnCkBA,GAAkB,CACtBP,EAAA,cAAcQ,EAAMH,CAAW,CAAkC,EACpEE,GAAA,MAAAA,GACb,EAiCE,WA/BkBA,GAAkB,CACtBP,EAAA,eAAeQ,EAAMH,CAAW,CAAkC,EACrEE,GAAA,MAAAA,GACb,EA6BE,aA3BmB,CAACE,EAAsCF,IAAkB,QACxEG,EAAAD,GAAA,YAAAA,EAAM,OAAN,MAAAC,EAAY,QAChBV,EAAc,QAAQS,GAAQD,EAAML,CAAY,CAAC,EAEtCI,GAAA,MAAAA,IACb,EAuBE,YArBkB,CAAOE,EAAsCF,IAAkBI,EAAA,wBACjFX,EAAc,cAAc,EAC5B,KAAM,CAAE,KAAAY,EAAM,MAAAC,CAAA,EAAUJ,GAAQD,EAAML,CAAY,EAClD,MAAMW,EAAS,EACPZ,EAAA,CACN,KAAM,YAAcU,EACpB,MAAAC,CAAA,CACD,EACUN,GAAA,MAAAA,GACb,GAaE,SAXe,CAACQ,EAAeH,IAAkB,CACnCZ,EAAA,SAASe,EAAOH,CAAI,CACpC,CAUA,CACF"}
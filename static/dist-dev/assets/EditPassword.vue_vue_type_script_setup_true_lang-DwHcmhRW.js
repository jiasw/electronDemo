var l=(g,r,a)=>new Promise((p,i)=>{var d=o=>{try{n(a.next(o))}catch(c){i(c)}},m=o=>{try{n(a.throw(o))}catch(c){i(c)}},n=o=>o.done?p(o.value):Promise.resolve(o.value).then(d,m);n((a=a.apply(g,r)).next())});import{F as _}from"./Form-Bj3x_paY.js";import{u as v}from"./useForm-JzSftaNC.js";import{u as h}from"./useValidator-HdVTM59K.js";import"./index-Spw_2G4t.js";/* empty css                   */import{m as x,k as B,b as E}from"./element-plus-Cbe27J2b.js";import{v as V,V as y,r as F,x as C,y as D,M as w,u as P,K as M,a3 as I,H as R,ad as T}from"./vue-chunks-COp0tDkU.js";const j=V({__name:"EditPassword",setup(g){const{required:r}=h(),a=y([{field:"password",label:"旧密码",component:"InputPassword",colProps:{span:24}},{field:"newPassword",label:"新密码",component:"InputPassword",colProps:{span:24},componentProps:{strength:!0}},{field:"newPassword2",label:"确认新密码",component:"InputPassword",colProps:{span:24},componentProps:{strength:!0}}]),p=y({password:[r()],newPassword:[r(),{asyncValidator:(t,e,s)=>l(this,null,function*(){const u=yield m(),{newPassword2:f}=u;e!==f?s(new Error("新密码与确认新密码不一致")):s()})}],newPassword2:[r(),{asyncValidator:(t,e,s)=>l(this,null,function*(){const u=yield m(),{newPassword:f}=u;e!==f?s(new Error("确认新密码与新密码不一致")):s()})}]}),{formRegister:i,formMethods:d}=v(),{getFormData:m,getElFormExpose:n}=d,o=F(!1),c=()=>l(this,null,function*(){const t=yield n();(yield t==null?void 0:t.validate().catch(s=>{console.log(s)}))&&B.confirm("是否确认修改?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>l(this,null,function*(){try{o.value=!0,E.success("修改成功")}catch(s){console.log(s)}finally{o.value=!1}})).catch(()=>{})});return(t,e)=>{const s=T("BaseButton");return C(),D(R,null,[w(P(_),{rules:p,onRegister:P(i),schema:a},null,8,["rules","onRegister","schema"]),w(P(x)),w(s,{type:"primary",onClick:c},{default:M(()=>e[0]||(e[0]=[I("确认修改")])),_:1})],64)}}});export{j as _};
//# sourceMappingURL=EditPassword.vue_vue_type_script_setup_true_lang-DwHcmhRW.js.map

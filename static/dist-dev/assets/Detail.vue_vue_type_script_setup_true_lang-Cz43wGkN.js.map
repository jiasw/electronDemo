{"version":3,"file":"Detail.vue_vue_type_script_setup_true_lang-Cz43wGkN.js","sources":["../../src/views/Authorization/Role/components/Detail.vue"],"sourcesContent":["<script setup lang=\"tsx\">\nimport { PropType, ref, unref, nextTick } from 'vue'\nimport { Descriptions, DescriptionsSchema } from '@/components/Descriptions'\nimport { ElTag, ElTree } from 'element-plus'\nimport { findIndex } from '@/utils'\nimport { getMenuListApi } from '@/api/menu'\n\ndefineProps({\n  currentRow: {\n    type: Object as PropType<any>,\n    default: () => undefined\n  }\n})\n\nconst filterPermissionName = (value: string) => {\n  const index = findIndex(unref(currentTreeData)?.permissionList || [], (item) => {\n    return item.value === value\n  })\n  return (unref(currentTreeData)?.permissionList || [])[index].label ?? ''\n}\n\nconst renderTag = (enable?: boolean) => {\n  return <ElTag type={!enable ? 'danger' : 'success'}>{enable ? '启用' : '禁用'}</ElTag>\n}\n\nconst treeRef = ref<typeof ElTree>()\n\nconst currentTreeData = ref()\nconst nodeClick = (treeData: any) => {\n  currentTreeData.value = treeData\n}\n\nconst treeData = ref<any[]>([])\nconst getMenuList = async () => {\n  const res = await getMenuListApi()\n  if (res) {\n    treeData.value = res.data.list\n    await nextTick()\n  }\n}\ngetMenuList()\n\nconst detailSchema = ref<DescriptionsSchema[]>([\n  {\n    field: 'roleName',\n    label: '角色名称'\n  },\n  {\n    field: 'status',\n    label: '状态',\n    slots: {\n      default: (data: any) => {\n        return renderTag(data.status)\n      }\n    }\n  },\n  {\n    field: 'remark',\n    label: '备注',\n    span: 24\n  },\n  {\n    field: 'permissionList',\n    label: '菜单分配',\n    span: 24,\n    slots: {\n      default: () => {\n        return (\n          <>\n            <div class=\"flex w-full\">\n              <div class=\"flex-1\">\n                <ElTree\n                  ref={treeRef}\n                  node-key=\"id\"\n                  props={{ children: 'children', label: 'title' }}\n                  highlight-current\n                  expand-on-click-node={false}\n                  data={treeData.value}\n                  onNode-click={nodeClick}\n                >\n                  {{\n                    default: (data) => {\n                      return <span>{data?.data?.title}</span>\n                    }\n                  }}\n                </ElTree>\n              </div>\n              <div class=\"flex-1\">\n                {unref(currentTreeData)\n                  ? unref(currentTreeData)?.meta?.permission?.map((v: string) => {\n                      return <ElTag class=\"ml-2 mt-2\">{filterPermissionName(v)}</ElTag>\n                    })\n                  : null}\n              </div>\n            </div>\n          </>\n        )\n      }\n    }\n  }\n])\n</script>\n\n<template>\n  <Descriptions :schema=\"detailSchema\" :data=\"currentRow || {}\" />\n</template>\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","filterPermissionName","value","index","findIndex","unref","currentTreeData","permissionList","item","label","renderTag","enable","_createVNode","ElTag","default","treeRef","ref","nodeClick","treeData","__async","res","getMenuListApi","data","list","nextTick","detailSchema","field","slots","status","span","_Fragment","ElTree","children","title","meta","permission","map","v","_slot"],"mappings":"ikBAK0C,SAAAA,EAAAC,EAAA,CAAA,OAAA,OAAAA,GAAA,YAAAC,OAAAC,UAAAC,SAAAC,KAAAJ,CAAA,IAAAK,mBAAAA,CAAAA,EAAAL,CAAA,CAAA,qFAS1C,MAAMM,EAAwBC,GAAkB,WAC9C,MAAMC,EAAQC,IAAUC,EAAAA,EAAMC,CAAe,IAArBD,YAAAA,EAAwBE,iBAAkB,CAAE,EAAGC,GAC9DA,EAAKN,QAAUA,CACvB,EACD,OAAQG,KAAAA,EAAAA,EAAMC,CAAe,IAArBD,YAAAA,EAAwBE,iBAAkB,CAAA,GAAIJ,CAAK,EAAEM,QAArDJ,KAAAA,EAA8D,EACxE,EAEMK,EAAaC,GACjBC,EAAAC,EAAA,CAAA,KAAqBF,EAAoB,UAAX,QAAoB,EAAA,CAAAG,QAAAA,IAAA,CAAGH,EAAS,KAAO,IAAI,CAAA,CAAA,EAGrEI,EAAUC,EAAmB,EAE7BV,EAAkBU,EAAI,EACtBC,EAAaC,GAAkB,CACnCZ,EAAgBJ,MAAQgB,CAC1B,EAEMA,EAAWF,EAAW,EAAE,EACEG,EAAA,sBAC9B,MAAMC,EAAM,MAAMC,EAAe,EAC7BD,IACFF,EAAShB,MAAQkB,EAAIE,KAAKC,KAC1B,MAAMC,EAAS,EAEnB,GAGA,MAAMC,EAAeT,EAA0B,CAC7C,CACEU,MAAO,WACPjB,MAAO,MACT,EACA,CACEiB,MAAO,SACPjB,MAAO,KACPkB,MAAO,CACLb,QAAUQ,GACDZ,EAAUY,EAAKM,MAAM,CAEhC,CACF,EACA,CACEF,MAAO,SACPjB,MAAO,KACPoB,KAAM,EACR,EACA,CACEH,MAAO,iBACPjB,MAAO,OACPoB,KAAM,GACNF,MAAO,CACLb,QAASA,IAAM,WACb,OAAAF,EAAAkB,EAAA,KAAA,CAAAlB,EAAA,MAAA,CAAA,MAAA,aAAA,EAAA,CAAAA,EAAA,MAAA,CAAA,MAAA,UAAAA,CAAAA,EAAAmB,EAAA,CAAA,IAKehB,EAAO,WAAA,KAAA,MAEL,CAAEiB,SAAU,WAAYvB,MAAO,OAAS,EAAA,oBAAA,GAAA,uBAEzB,GAAK,KACrBS,EAAShB,MAAK,eACNe,CAAS,EAAA,CAGrBH,QAAUQ,GAAS,OACjB,OAAAV,EAAcU,OAAAA,KAAAA,EAAAA,EAAAA,GAAAA,YAAAA,EAAMA,OAANA,YAAAA,EAAYW,KAAK,CAAA,CACjC,CAAA,CAAA,CAAA,CAAA,EAAArB,EAAA,MAAA,CAAA,MAAA,QAAA,EAAA,CAKHP,EAAMC,CAAe,GAClBD,GAAAA,GAAAA,EAAAA,EAAMC,CAAe,IAArBD,YAAAA,EAAwB6B,OAAxB7B,YAAAA,EAA8B8B,aAA9B9B,YAAAA,EAA0C+B,IAAKC,GAAc,CAAA,IAAAC,EAC3D,OAAA1B,EAAAC,EAAA,CAAA,MAAA,aAAAnB,EAAA4C,EAAiCrC,EAAqBoC,CAAC,CAAC,EAAAC,EAAA,CAAAxB,QAAAA,IAAA,CAAAwB,CAAA,CAAA,CAAA,CACzD,GACD,IAAI,CAAA,CAAA,CAAA,CAAA,CAAA,CAKlB,CACF,CACF,CAAA,CACD"}
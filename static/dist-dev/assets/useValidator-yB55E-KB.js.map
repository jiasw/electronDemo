{"version":3,"file":"useValidator-yB55E-KB.js","sources":["../../src/views/hooks/useValidator.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ContentWrap } from '@/components/ContentWrap'\nimport { Form, FormSchema } from '@/components/Form'\nimport { useValidator } from '@/hooks/web/useValidator'\nimport { useForm } from '@/hooks/web/useForm'\nimport { reactive } from 'vue'\nimport { FormItemRule } from 'element-plus'\n\nconst { formRegister, formMethods } = useForm()\n\nconst { getFormData } = formMethods\n\nconst { required, lengthRange, notSpace, notSpecialCharacters } = useValidator()\n\nconst formSchema = reactive<FormSchema[]>([\n  {\n    field: 'field1',\n    label: '必填',\n    component: 'Input'\n  },\n  {\n    field: 'field2',\n    label: '长度范围',\n    component: 'Input'\n  },\n  {\n    field: 'field3',\n    label: '不能有空格',\n    component: 'Input'\n  },\n  {\n    field: 'field4',\n    label: '不能有特殊字符',\n    component: 'Input'\n  },\n  {\n    field: 'field5',\n    label: '是否相等-值1',\n    component: 'Input'\n  },\n  {\n    field: 'field6',\n    label: '是否相等-值2',\n    component: 'Input'\n  }\n])\n\nconst rules = reactive<{\n  [key: string]: FormItemRule[]\n}>({\n  field1: [required()],\n  field2: [\n    lengthRange({\n      min: 2,\n      max: 5\n    })\n  ],\n  field3: [notSpace()],\n  field4: [notSpecialCharacters()],\n  field5: [\n    {\n      asyncValidator: async (_, val, callback) => {\n        const formData = await getFormData()\n        const { field6 } = formData\n        if (val !== field6) {\n          callback(new Error('两个值不相等'))\n        } else {\n          callback()\n        }\n      }\n    }\n  ]\n})\n</script>\n\n<template>\n  <ContentWrap title=\"useValidator\">\n    <Form :schema=\"formSchema\" :rules=\"rules\" @register=\"formRegister\" />\n  </ContentWrap>\n</template>\n"],"names":["formRegister","formMethods","useForm","getFormData","required","lengthRange","notSpace","notSpecialCharacters","useValidator","formSchema","reactive","rules","val","callback","__async","formData","field6"],"mappings":"y3CAQA,KAAM,CAAE,aAAAA,EAAc,YAAAC,CAAY,EAAIC,EAAQ,EAExC,CAAE,YAAAC,GAAgBF,EAElB,CAAE,SAAAG,EAAU,YAAAC,EAAa,SAAAC,EAAU,qBAAAC,CAAA,EAAyBC,EAAa,EAEzEC,EAAaC,EAAuB,CACxC,CACE,MAAO,SACP,MAAO,KACP,UAAW,OACb,EACA,CACE,MAAO,SACP,MAAO,OACP,UAAW,OACb,EACA,CACE,MAAO,SACP,MAAO,QACP,UAAW,OACb,EACA,CACE,MAAO,SACP,MAAO,UACP,UAAW,OACb,EACA,CACE,MAAO,SACP,MAAO,UACP,UAAW,OACb,EACA,CACE,MAAO,SACP,MAAO,UACP,UAAW,OAAA,CACb,CACD,EAEKC,EAAQD,EAEX,CACD,OAAQ,CAACN,GAAU,EACnB,OAAQ,CACNC,EAAY,CACV,IAAK,EACL,IAAK,CACN,CAAA,CACH,EACA,OAAQ,CAACC,GAAU,EACnB,OAAQ,CAACC,GAAsB,EAC/B,OAAQ,CACN,CACE,eAAgB,CAAO,EAAGK,EAAKC,IAAaC,EAAA,sBACpC,MAAAC,EAAW,MAAMZ,EAAY,EAC7B,CAAE,OAAAa,GAAWD,EACfH,IAAQI,EACDH,EAAA,IAAI,MAAM,QAAQ,CAAC,EAEnBA,EAAA,CACX,EACF,CACF,CACF,CACD"}
{"version":3,"file":"ExampleEdit-BT8bU4ca.js","sources":["../../src/views/Example/Page/ExampleEdit.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport Write from './components/Write.vue'\nimport { ContentDetailWrap } from '@/components/ContentDetailWrap'\nimport { ref, unref } from 'vue'\nimport { useI18n } from '@/hooks/web/useI18n'\nimport { useRouter, useRoute } from 'vue-router'\nimport { saveTableApi, getTableDetApi } from '@/api/table'\nimport { TableData } from '@/api/table/types'\nimport { useEventBus } from '@/hooks/event/useEventBus'\n\nconst { emit } = useEventBus()\n\nconst { push, go } = useRouter()\n\nconst { query } = useRoute()\n\nconst { t } = useI18n()\n\nconst currentRow = ref<Nullable<TableData>>(null)\n\nconst getTableDet = async () => {\n  const res = await getTableDetApi(query.id as string)\n  if (res) {\n    currentRow.value = res.data\n  }\n}\n\ngetTableDet()\n\nconst writeRef = ref<ComponentRef<typeof Write>>()\n\nconst loading = ref(false)\n\nconst save = async () => {\n  const write = unref(writeRef)\n  const formData = await write?.submit()\n  if (formData) {\n    loading.value = true\n    const res = await saveTableApi(formData)\n      .catch(() => {})\n      .finally(() => {\n        loading.value = false\n      })\n    if (res) {\n      emit('getList', 'editor')\n      push('/example/example-page')\n    }\n  }\n}\n</script>\n\n<template>\n  <ContentDetailWrap :title=\"t('exampleDemo.edit')\" @back=\"push('/example/example-page')\">\n    <Write ref=\"writeRef\" :current-row=\"currentRow\" />\n\n    <template #header>\n      <BaseButton @click=\"go(-1)\">\n        {{ t('common.back') }}\n      </BaseButton>\n      <BaseButton type=\"primary\" :loading=\"loading\" @click=\"save\">\n        {{ t('exampleDemo.save') }}\n      </BaseButton>\n    </template>\n  </ContentDetailWrap>\n</template>\n@/hooks/event/useEventBus\n"],"names":["emit","useEventBus","push","go","useRouter","query","useRoute","t","useI18n","currentRow","ref","__async","res","getTableDetApi","writeRef","loading","save","write","unref","formData","saveTableApi"],"mappings":"sjDAUM,KAAA,CAAE,KAAAA,CAAK,EAAIC,EAAY,EAEvB,CAAE,KAAAC,EAAM,GAAAC,CAAG,EAAIC,EAAU,EAEzB,CAAE,MAAAC,CAAM,EAAIC,EAAS,EAErB,CAAE,EAAAC,CAAE,EAAIC,EAAQ,EAEhBC,EAAaC,EAAyB,IAAI,EAEhBC,EAAA,sBAC9B,MAAMC,EAAM,MAAMC,EAAeR,EAAM,EAAY,EAC/CO,IACFH,EAAW,MAAQG,EAAI,KAE3B,GAIA,MAAME,EAAWJ,EAAgC,EAE3CK,EAAUL,EAAI,EAAK,EAEnBM,EAAO,IAAYL,EAAA,sBACjB,MAAAM,EAAQC,EAAMJ,CAAQ,EACtBK,EAAW,MAAMF,GAAA,YAAAA,EAAO,SAC1BE,IACFJ,EAAQ,MAAQ,IACJ,MAAMK,EAAaD,CAAQ,EACpC,MAAM,IAAM,CAAA,CAAE,EACd,QAAQ,IAAM,CACbJ,EAAQ,MAAQ,EAAA,CACjB,KAEDf,EAAK,UAAW,QAAQ,EACxBE,EAAK,uBAAuB,GAGlC"}
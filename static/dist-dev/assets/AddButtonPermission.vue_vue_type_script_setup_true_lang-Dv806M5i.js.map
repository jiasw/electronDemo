{"version":3,"file":"AddButtonPermission.vue_vue_type_script_setup_true_lang-Dv806M5i.js","sources":["../../src/views/Authorization/Menu/components/AddButtonPermission.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { FormSchema, Form } from '@/components/Form'\nimport { ElDrawer } from 'element-plus'\nimport { reactive } from 'vue'\nimport { useForm } from '@/hooks/web/useForm'\nimport { useValidator } from '@/hooks/web/useValidator'\n\nconst modelValue = defineModel<boolean>()\n\nconst { required } = useValidator()\n\nconst formSchema = reactive<FormSchema[]>([\n  {\n    field: 'label',\n    label: 'label',\n    component: 'Input',\n    colProps: {\n      span: 24\n    }\n  },\n  {\n    field: 'value',\n    label: 'value',\n    component: 'Input',\n    colProps: {\n      span: 24\n    }\n  }\n])\n\nconst { formRegister, formMethods } = useForm()\nconst { getFormData, getElFormExpose } = formMethods\n\nconst emit = defineEmits(['confirm'])\n\nconst rules = reactive({\n  label: [required()],\n  value: [required()]\n})\n\nconst confirm = async () => {\n  const elFormExpose = await getElFormExpose()\n  if (!elFormExpose) return\n  const valid = await elFormExpose?.validate().catch((err) => {\n    console.log(err)\n  })\n  if (valid) {\n    const formData = await getFormData()\n    formData.id = Date.now()\n    emit('confirm', formData)\n    modelValue.value = false\n  }\n}\n</script>\n\n<template>\n  <ElDrawer v-model=\"modelValue\" title=\"新增按钮权限\">\n    <template #default>\n      <Form :rules=\"rules\" @register=\"formRegister\" :schema=\"formSchema\" />\n    </template>\n    <template #footer>\n      <div>\n        <BaseButton @click=\"() => (modelValue = false)\">取消</BaseButton>\n        <BaseButton type=\"primary\" @click=\"confirm\">确认</BaseButton>\n      </div>\n    </template>\n  </ElDrawer>\n</template>\n"],"names":["modelValue","_useModel","__props","required","useValidator","formSchema","reactive","formRegister","formMethods","useForm","getFormData","getElFormExpose","emit","__emit","rules","confirm","__async","elFormExpose","err","formData"],"mappings":"gtBAOM,MAAAA,EAAaC,EAAqBC,EAAA,YAAA,EAElC,CAAE,SAAAC,CAAS,EAAIC,EAAa,EAE5BC,EAAaC,EAAuB,CACxC,CACE,MAAO,QACP,MAAO,QACP,UAAW,QACX,SAAU,CACR,KAAM,EAAA,CAEV,EACA,CACE,MAAO,QACP,MAAO,QACP,UAAW,QACX,SAAU,CACR,KAAM,EAAA,CACR,CACF,CACD,EAEK,CAAE,aAAAC,EAAc,YAAAC,CAAY,EAAIC,EAAQ,EACxC,CAAE,YAAAC,EAAa,gBAAAC,CAAA,EAAoBH,EAEnCI,EAAOC,EAEPC,EAAQR,EAAS,CACrB,MAAO,CAACH,GAAU,EAClB,MAAO,CAACA,EAAU,CAAA,CAAA,CACnB,EAEKY,EAAU,IAAYC,EAAA,sBACpB,MAAAC,EAAe,MAAMN,EAAgB,EAC3C,GAAI,CAACM,EAAc,OAInB,GAHc,MAAMA,GAAA,YAAAA,EAAc,WAAW,MAAOC,GAAQ,CAC1D,QAAQ,IAAIA,CAAG,CAAA,GAEN,CACH,MAAAC,EAAW,MAAMT,EAAY,EAC1BS,EAAA,GAAK,KAAK,IAAI,EACvBP,EAAK,UAAWO,CAAQ,EACxBnB,EAAW,MAAQ,EAAA,CAEvB"}
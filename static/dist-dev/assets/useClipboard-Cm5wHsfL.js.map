{"version":3,"file":"useClipboard-Cm5wHsfL.js","sources":["../../src/hooks/web/useClipboard.ts","../../src/views/hooks/useClipboard.vue"],"sourcesContent":["import { ref } from 'vue'\n\nconst useClipboard = () => {\n  const copied = ref(false)\n  const text = ref('')\n  const isSupported = ref(false)\n\n  if (!navigator.clipboard && !document.execCommand) {\n    isSupported.value = false\n  } else {\n    isSupported.value = true\n  }\n\n  const copy = (str: string) => {\n    if (navigator.clipboard) {\n      navigator.clipboard.writeText(str).then(() => {\n        text.value = str\n        copied.value = true\n        resetCopied()\n      })\n      return\n    }\n    const input = document.createElement('input')\n    input.setAttribute('readonly', 'readonly')\n    input.setAttribute('value', str)\n    document.body.appendChild(input)\n    input.select()\n    input.setSelectionRange(0, 9999)\n    if (document.execCommand('copy')) {\n      text.value = str\n      document.execCommand('copy')\n      copied.value = true\n      resetCopied()\n    }\n    document.body.removeChild(input)\n  }\n\n  const resetCopied = () => {\n    setTimeout(() => {\n      copied.value = false\n    }, 1500)\n  }\n\n  return { copy, text, copied, isSupported }\n}\n\nexport { useClipboard }\n","<script setup lang=\"ts\">\nimport { ContentWrap } from '@/components/ContentWrap'\nimport { useClipboard } from '@/hooks/web/useClipboard'\nimport { ElInput } from 'element-plus'\nimport { ref } from 'vue'\n\nconst { copy, copied, text, isSupported } = useClipboard()\n\nconst source = ref('')\n</script>\n\n<template>\n  <ContentWrap title=\"useClipboard\">\n    <ElInput v-model=\"source\" placeholder=\"请输入要复制的内容\" />\n    <div v-if=\"isSupported\">\n      <BaseButton @click=\"copy(source)\" type=\"primary\" class=\"mt-20px\">\n        <span v-if=\"!copied\">复制</span>\n        <span v-else>已复制</span>\n      </BaseButton>\n      <p>\n        当前已复制: <code>{{ text || 'none' }}</code>\n      </p>\n    </div>\n    <p v-else> 你的浏览器不支持 Clipboard API </p>\n  </ContentWrap>\n</template>\n"],"names":["useClipboard","copied","ref","text","isSupported","copy","str","resetCopied","input","source"],"mappings":"uVAEA,MAAMA,EAAe,IAAM,CACnB,MAAAC,EAASC,EAAI,EAAK,EAClBC,EAAOD,EAAI,EAAE,EACbE,EAAcF,EAAI,EAAK,EAEzB,CAAC,UAAU,WAAa,CAAC,SAAS,YACpCE,EAAY,MAAQ,GAEpBA,EAAY,MAAQ,GAGhB,MAAAC,EAAQC,GAAgB,CAC5B,GAAI,UAAU,UAAW,CACvB,UAAU,UAAU,UAAUA,CAAG,EAAE,KAAK,IAAM,CAC5CH,EAAK,MAAQG,EACbL,EAAO,MAAQ,GACHM,EAAA,CAAA,CACb,EACD,MAAA,CAEI,MAAAC,EAAQ,SAAS,cAAc,OAAO,EACtCA,EAAA,aAAa,WAAY,UAAU,EACnCA,EAAA,aAAa,QAASF,CAAG,EACtB,SAAA,KAAK,YAAYE,CAAK,EAC/BA,EAAM,OAAO,EACPA,EAAA,kBAAkB,EAAG,IAAI,EAC3B,SAAS,YAAY,MAAM,IAC7BL,EAAK,MAAQG,EACb,SAAS,YAAY,MAAM,EAC3BL,EAAO,MAAQ,GACHM,EAAA,GAEL,SAAA,KAAK,YAAYC,CAAK,CACjC,EAEMD,EAAc,IAAM,CACxB,WAAW,IAAM,CACfN,EAAO,MAAQ,IACd,IAAI,CACT,EAEA,MAAO,CAAE,KAAAI,EAAM,KAAAF,EAAM,OAAAF,EAAQ,YAAAG,CAAY,CAC3C,8ECtCA,KAAM,CAAE,KAAAC,EAAM,OAAAJ,EAAQ,KAAAE,EAAM,YAAAC,CAAA,EAAgBJ,EAAa,EAEnDS,EAASP,EAAI,EAAE"}
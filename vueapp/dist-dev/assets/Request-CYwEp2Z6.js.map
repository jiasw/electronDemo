{"version":3,"file":"Request-CYwEp2Z6.js","sources":["../../src/api/request/index.ts","../../src/views/Function/Request.vue"],"sourcesContent":["import request from '@/axios'\nimport { RequestResponse } from './types'\n\nexport const request1 = () => {\n  return request.get<IResponse<RequestResponse>>({\n    url: '/mock/request/1'\n  })\n}\n\nexport const request2 = () => {\n  return request.get<IResponse<RequestResponse>>({\n    url: '/mock/request/2'\n  })\n}\n\nexport const request3 = () => {\n  return request.get<IResponse<RequestResponse>>({\n    url: '/mock/request/3'\n  })\n}\n\nexport const request4 = () => {\n  return request.get<IResponse<RequestResponse>>({\n    url: '/mock/request/4'\n  })\n}\n\nexport const request5 = () => {\n  return request.get<IResponse<RequestResponse>>({\n    url: '/mock/request/5'\n  })\n}\n\nexport const expired = () => {\n  return request.get<IResponse<RequestResponse>>({\n    url: '/mock/request/expired'\n  })\n}\n","<script lang=\"ts\" setup>\nimport { ContentWrap } from '@/components/ContentWrap'\nimport { useI18n } from '@/hooks/web/useI18n'\nimport { ElDivider } from 'element-plus'\nimport { request1, request2, request3, request4, request5, expired } from '@/api/request'\nimport { ref } from 'vue'\nimport request from '@/axios'\n\nconst { t } = useI18n()\n\nconst pending = ref<Set<string>>(new Set())\n\nconst getRequest1 = async () => {\n  if (pending.value.has('/request/1')) {\n    return\n  }\n  try {\n    pending.value.add('/request/1')\n    const res = await request1()\n    console.log('【res】：', res)\n  } catch (error) {\n    console.log('【error】：', error)\n  } finally {\n    pending.value.delete('/request/1')\n  }\n}\n\nconst getRequest2 = async () => {\n  if (pending.value.has('/request/2')) {\n    return\n  }\n  try {\n    pending.value.add('/request/2')\n    const res = await request2()\n    console.log('【res】：', res)\n  } catch (error) {\n    console.log('【error】：', error)\n  } finally {\n    pending.value.delete('/request/2')\n  }\n}\n\nconst getRequest3 = async () => {\n  if (pending.value.has('/request/3')) {\n    return\n  }\n  try {\n    pending.value.add('/request/3')\n    const res = await request3()\n    console.log('【res】：', res)\n  } catch (error) {\n    console.log('【error】：', error)\n  } finally {\n    pending.value.delete('/request/3')\n  }\n}\n\nconst getRequest4 = async () => {\n  if (pending.value.has('/request/4')) {\n    return\n  }\n  try {\n    pending.value.add('/request/4')\n    const res = await request4()\n    console.log('【res】：', res)\n  } catch (error) {\n    console.log('【error】：', error)\n  } finally {\n    pending.value.delete('/request/4')\n  }\n}\n\nconst getRequest5 = async () => {\n  if (pending.value.has('/request/5')) {\n    return\n  }\n  try {\n    pending.value.add('/request/5')\n    const res = await request5()\n    console.log('【res】：', res)\n  } catch (error) {\n    console.log('【error】：', error)\n  } finally {\n    pending.value.delete('/request/5')\n  }\n}\n\nconst getAll = () => {\n  getRequest1()\n  getRequest2()\n  getRequest3()\n  getRequest4()\n  getRequest5()\n}\n\nconst cancelAll = () => {\n  request.cancelAllRequest()\n  pending.value.clear()\n}\n\n// set转数组\nconst setToArray = (set: Set<string>) => {\n  const arr: string[] = []\n  set.forEach((item) => {\n    arr.push(item)\n  })\n  return arr\n}\n\nconst clickRequest1 = () => {\n  if (pending.value.has('/request/1')) {\n    request.cancelRequest('/request/1')\n    pending.value.delete('/request/1')\n    return\n  }\n  getRequest1()\n}\n\nconst clickRequest2 = () => {\n  if (pending.value.has('/request/2')) {\n    request.cancelRequest('/request/2')\n    pending.value.delete('/request/2')\n    return\n  }\n  getRequest2()\n}\n\nconst clickRequest3 = () => {\n  if (pending.value.has('/request/3')) {\n    request.cancelRequest('/request/3')\n    pending.value.delete('/request/3')\n    return\n  }\n  getRequest3()\n}\n\nconst clickRequest4 = () => {\n  if (pending.value.has('/request/4')) {\n    request.cancelRequest('/request/4')\n    pending.value.delete('/request/4')\n    return\n  }\n  getRequest4()\n}\n\nconst clickRequest5 = () => {\n  if (pending.value.has('/request/5')) {\n    request.cancelRequest('/request/5')\n    pending.value.delete('/request/5')\n    return\n  }\n  getRequest5()\n}\n\nconst tokenExpired = () => {\n  expired()\n}\n</script>\n\n<template>\n  <ContentWrap :title=\"t('router.request')\">\n    <p>正在请求的接口：{{ setToArray(pending) }}</p>\n    <BaseButton type=\"primary\" @click=\"clickRequest1\">请求/取消request1</BaseButton>\n    <BaseButton type=\"primary\" @click=\"clickRequest2\">请求/取消request2</BaseButton>\n    <BaseButton type=\"primary\" @click=\"clickRequest3\">请求/取消request3</BaseButton>\n    <BaseButton type=\"primary\" @click=\"clickRequest4\">请求/取消request4</BaseButton>\n    <BaseButton type=\"primary\" @click=\"clickRequest5\">请求/取消request5</BaseButton>\n    <BaseButton type=\"primary\" @click=\"getAll\">发送五个请求</BaseButton>\n    <BaseButton type=\"primary\" @click=\"cancelAll\">关闭所有请求</BaseButton>\n    <ElDivider />\n    <BaseButton type=\"primary\" @click=\"tokenExpired\">token过期</BaseButton>\n  </ContentWrap>\n</template>\n"],"names":["request1","request","request2","request3","request4","request5","expired","t","useI18n","pending","ref","getRequest1","__async","res","error","getRequest2","getRequest3","getRequest4","getRequest5","getAll","cancelAll","setToArray","set","arr","item","clickRequest1","clickRequest2","clickRequest3","clickRequest4","clickRequest5","tokenExpired"],"mappings":"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"}
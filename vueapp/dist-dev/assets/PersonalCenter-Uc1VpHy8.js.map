{"version":3,"file":"PersonalCenter-Uc1VpHy8.js","sources":["../../src/views/Personal/PersonalCenter/PersonalCenter.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ContentWrap } from '@/components/ContentWrap'\nimport { ref, unref } from 'vue'\nimport { ElDivider, ElImage, ElTag, ElTabPane, ElTabs, ElButton, ElMessage } from 'element-plus'\nimport defaultAvatar from '@/assets/imgs/avatar.jpg'\nimport UploadAvatar from './components/UploadAvatar.vue'\nimport { Dialog } from '@/components/Dialog'\nimport EditInfo from './components/EditInfo.vue'\nimport EditPassword from './components/EditPassword.vue'\n\nconst userInfo = ref()\nconst fetchDetailUserApi = async () => {\n  // 这里可以调用接口获取用户信息\n  const data = {\n    id: 1,\n    username: 'admin',\n    realName: 'admin',\n    phoneNumber: '18888888888',\n    email: '502431556@qq.com',\n    avatarUrl: '',\n    roleList: ['超级管理员']\n  }\n  userInfo.value = data\n}\nfetchDetailUserApi()\n\nconst activeName = ref('first')\n\nconst dialogVisible = ref(false)\n\nconst uploadAvatarRef = ref<ComponentRef<typeof UploadAvatar>>()\nconst avatarLoading = ref(false)\nconst saveAvatar = async () => {\n  try {\n    avatarLoading.value = true\n    const base64 = unref(uploadAvatarRef)?.getBase64()\n    console.log(base64)\n    // 这里可以调用修改头像接口\n    fetchDetailUserApi()\n    ElMessage.success('修改成功')\n    dialogVisible.value = false\n  } catch (error) {\n    console.log(error)\n  } finally {\n    avatarLoading.value = false\n  }\n}\n</script>\n\n<template>\n  <div class=\"flex w-100% h-100%\">\n    <ContentWrap title=\"个人信息\" class=\"w-400px\">\n      <div class=\"flex justify-center items-center\">\n        <div\n          class=\"avatar w-[150px] h-[150px] relative cursor-pointer\"\n          @click=\"dialogVisible = true\"\n        >\n          <ElImage\n            class=\"w-[150px] h-[150px] rounded-full\"\n            :src=\"userInfo?.avatarUrl || defaultAvatar\"\n            fit=\"fill\"\n          />\n        </div>\n      </div>\n      <ElDivider />\n      <div class=\"flex justify-between items-center\">\n        <div>账号：</div>\n        <div>{{ userInfo?.username }}</div>\n      </div>\n      <ElDivider />\n      <div class=\"flex justify-between items-center\">\n        <div>昵称：</div>\n        <div>{{ userInfo?.realName }}</div>\n      </div>\n      <ElDivider />\n      <div class=\"flex justify-between items-center\">\n        <div>手机号码：</div>\n        <div>{{ userInfo?.phoneNumber ?? '-' }}</div>\n      </div>\n      <ElDivider />\n      <div class=\"flex justify-between items-center\">\n        <div>用户邮箱：</div>\n        <div>{{ userInfo?.email ?? '-' }}</div>\n      </div>\n      <ElDivider />\n      <div class=\"flex justify-between items-center\">\n        <div>所属角色：</div>\n        <div>\n          <template v-if=\"userInfo?.roleList?.length\">\n            <ElTag v-for=\"item in userInfo?.roleList || []\" :key=\"item\" class=\"ml-2 mb-w\"\n              >{{ item }}\n            </ElTag>\n          </template>\n          <template v-else>-</template>\n        </div>\n      </div>\n      <ElDivider />\n    </ContentWrap>\n    <ContentWrap title=\"基本资料\" class=\"flex-[3] ml-20px\">\n      <ElTabs v-model=\"activeName\">\n        <ElTabPane label=\"基本信息\" name=\"first\">\n          <EditInfo :user-info=\"userInfo\" />\n        </ElTabPane>\n        <ElTabPane label=\"修改密码\" name=\"second\">\n          <EditPassword />\n        </ElTabPane>\n      </ElTabs>\n    </ContentWrap>\n  </div>\n\n  <Dialog v-model=\"dialogVisible\" title=\"修改头像\" width=\"800px\">\n    <UploadAvatar ref=\"uploadAvatarRef\" :url=\"userInfo?.avatarUrl || defaultAvatar\" />\n\n    <template #footer>\n      <ElButton type=\"primary\" :loading=\"avatarLoading\" @click=\"saveAvatar\"> 保存 </ElButton>\n      <ElButton @click=\"dialogVisible = false\">关闭</ElButton>\n    </template>\n  </Dialog>\n</template>\n\n<style lang=\"less\" scoped>\n.avatar {\n  position: relative;\n\n  &::after {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: flex;\n    width: 100%;\n    height: 100%;\n    font-size: 50px;\n    color: #fff;\n    background-color: rgb(0 0 0 / 40%);\n    border-radius: 50%;\n    content: '+';\n    opacity: 0;\n    justify-content: center;\n    align-items: center;\n  }\n\n  &:hover {\n    &::after {\n      opacity: 1;\n    }\n  }\n}\n</style>\n"],"names":["userInfo","ref","fetchDetailUserApi","__async","data","activeName","dialogVisible","uploadAvatarRef","avatarLoading","saveAvatar","base64","_a","unref","ElMessage","error"],"mappings":"muEAUA,MAAMA,EAAWC,EAAI,EACfC,EAAqB,IAAYC,EAAA,sBAErC,MAAMC,EAAO,CACX,GAAI,EACJ,SAAU,QACV,SAAU,QACV,YAAa,cACb,MAAO,mBACP,UAAW,GACX,SAAU,CAAC,OAAO,CACpB,EACAJ,EAAS,MAAQI,CACnB,GACmBF,EAAA,EAEb,MAAAG,EAAaJ,EAAI,OAAO,EAExBK,EAAgBL,EAAI,EAAK,EAEzBM,EAAkBN,EAAuC,EACzDO,EAAgBP,EAAI,EAAK,EACzBQ,EAAa,IAAYN,EAAA,4BACzB,GAAA,CACFK,EAAc,MAAQ,GACtB,MAAME,GAASC,EAAAC,EAAML,CAAe,IAArB,YAAAI,EAAwB,YACvC,QAAQ,IAAID,CAAM,EAECR,EAAA,EACnBW,EAAU,QAAQ,MAAM,EACxBP,EAAc,MAAQ,SACfQ,EAAO,CACd,QAAQ,IAAIA,CAAK,CAAA,QACjB,CACAN,EAAc,MAAQ,EAAA,CAE1B"}
{"version":3,"file":"Test-CPMTXdv9.js","sources":["../../src/components/Permission/src/utils.ts","../../src/views/Function/Test.vue"],"sourcesContent":["import { useI18n } from '@/hooks/web/useI18n'\nimport router from '@/router'\n\nexport const hasPermi = (value: string) => {\n  const { t } = useI18n()\n  const permission = (router.currentRoute.value.meta.permission || []) as string[]\n  if (!value) {\n    throw new Error(t('permission.hasPermission'))\n  }\n  if (permission.includes(value)) {\n    return true\n  }\n  return false\n}\n","<script setup lang=\"tsx\">\nimport { ContentWrap } from '@/components/ContentWrap'\nimport { ref, unref } from 'vue'\nimport { ElDivider, ElRow, ElCol } from 'element-plus'\nimport { hasPermi } from '@/components/Permission'\n\nconst permission = ref('add')\n\nsetTimeout(() => {\n  permission.value = 'view'\n}, 3000)\n</script>\n\n<template>\n  <ContentWrap>\n    <ElDivider>组件方式判断（已经全局注册，支持动态修改）</ElDivider>\n    <ElRow :gutter=\"20\">\n      <ElCol :span=\"8\">\n        新增权限：\n        <Permission permission=\"add\">\n          <BaseButton type=\"primary\"> Add </BaseButton>\n        </Permission>\n      </ElCol>\n      <ElCol :span=\"8\">\n        删除权限：\n        <Permission permission=\"delete\">\n          <BaseButton type=\"danger\"> Delete </BaseButton>\n        </Permission>\n      </ElCol>\n      <ElCol :span=\"8\">\n        3秒后切换查看权限：\n        <Permission :permission=\"permission\">\n          <BaseButton type=\"primary\"> View </BaseButton>\n        </Permission>\n      </ElCol>\n    </ElRow>\n\n    <ElDivider>指令方式判断（已经全局注册，不支持动态修改）</ElDivider>\n    <ElRow :gutter=\"20\">\n      <ElCol :span=\"8\">\n        新增权限：\n        <BaseButton v-hasPermi=\"'add'\" type=\"primary\"> Add </BaseButton>\n      </ElCol>\n      <ElCol :span=\"8\">\n        删除权限：\n        <BaseButton v-hasPermi=\"'delete'\" type=\"danger\"> Delete </BaseButton>\n      </ElCol>\n      <ElCol :span=\"8\">\n        3秒后切换查看权限（无法动态修改）：\n        <BaseButton v-hasPermi=\"permission\" type=\"primary\"> View </BaseButton>\n      </ElCol>\n    </ElRow>\n\n    <ElDivider>函数方式判断</ElDivider>\n    <ElRow :gutter=\"20\">\n      <ElCol :span=\"8\">\n        新增权限：\n        <BaseButton v-if=\"hasPermi('add')\" type=\"primary\"> Add </BaseButton>\n      </ElCol>\n      <ElCol :span=\"8\">\n        删除权限：\n        <BaseButton v-if=\"hasPermi('delete')\" type=\"danger\"> Delete </BaseButton>\n      </ElCol>\n      <ElCol :span=\"8\">\n        3秒后切换查看权限：\n        <BaseButton v-if=\"hasPermi(unref(permission))\" type=\"primary\"> View </BaseButton>\n      </ElCol>\n    </ElRow>\n  </ContentWrap>\n</template>\n"],"names":["hasPermi","value","t","useI18n","permission","router","ref","setTimeout"],"mappings":"ubAGa,MAAAA,EAAYC,GAAkB,CACnC,KAAA,CAAE,EAAAC,CAAE,EAAIC,EAAQ,EAChBC,EAAcC,EAAO,aAAa,MAAM,KAAK,YAAc,CAAC,EAClE,GAAI,CAACJ,EACH,MAAM,IAAI,MAAMC,EAAE,0BAA0B,CAAC,EAE3C,MAAA,EAAAE,EAAW,SAASH,CAAK,CAI/B,8BCPA,MAAMG,EAAaE,EAAI,KAAK,EAE5BC,kBAAW,IAAM,CACfH,EAAWH,MAAQ,MACpB,EAAE,GAAI"}